(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8312:function(e,l,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return t(6325)}])},6325:function(e,l,t){"use strict";t.r(l),t.d(l,{default:function(){return Home}});var a=t(5893),r=t(214),c=t.n(r),i=t(7294),n=t(9842),s=t.n(n);let o="/suika-game",d="cherry",S="strawberry",u="grape",m="orange",p="kaki",f="apple",x="pear",b="peach",h="pineapple",y="melon",g="watermelon",w=21*1.8,v=37*1.8,k=42*1.8,C=52*1.8,F=62*1.8,N=[d,S,u,m,p];function Game(){let e=i.useRef(null),[l,t]=i.useState(),[r,c]=i.useState(!1),[n,E]=i.useState(!1),[_,j]=i.useState(0);var B=s().Engine,A=s().Render,M=s().Runner,P=(s().Composites,s().Events),G=s().Common,O=s().MouseConstraint,R=s().Mouse,D=s().Composite,I=s().Bodies;let[K,T]=i.useState([G.choose(N),G.choose(N)]),[W,X]=i.useState(),[H,q]=i.useState(),[z,J]=i.useState(),[L,Q]=i.useState(),[U,V]=i.useState(),[Y,Z]=i.useState(),createCherry=(e,l,t)=>I.circle(e,l,14.4,{mass:3,label:d,isStatic:t,isSensor:t,collisionFilter:{category:1},render:{fillStyle:"#CE2E21",sprite:{texture:"".concat(o,"/").concat(d,".png"),xScale:1,yScale:1}}}),createStrawberry=(e,l,t)=>I.circle(e,l,18,{mass:3,label:S,isStatic:t,isSensor:t,collisionFilter:{category:1},render:{fillStyle:"#EC7259",sprite:{texture:"".concat(o,"/").concat(S,".png"),xScale:1,yScale:1}}}),createGrape=(e,l,t)=>I.circle(e,l,25.2,{mass:3,label:u,isStatic:t,isSensor:t,collisionFilter:{category:1},render:{fillStyle:"#8C60EF",sprite:{texture:"".concat(o,"/").concat(u,".png"),xScale:1,yScale:1}}}),createOrange=(e,l,t)=>I.circle(e,l,30.6,{mass:3,label:m,isStatic:t,isSensor:t,collisionFilter:{category:1},render:{fillStyle:"#F4B940",sprite:{texture:"".concat(o,"/").concat(m,".png"),xScale:1,yScale:1}}}),createKaki=(e,l,t)=>I.circle(e,l,w,{mass:3,label:p,isStatic:t,isSensor:t,collisionFilter:{category:1},render:{fillStyle:"#EB8E39",sprite:{texture:"".concat(o,"/").concat(p,".png"),xScale:1,yScale:1}}}),createApple=(e,l,t)=>I.circle(e,l,48.6,{mass:3,label:f,isStatic:t,isSensor:t,collisionFilter:{category:1},render:{fillStyle:"#DC3224",sprite:{texture:"".concat(o,"/").concat(f,".png"),xScale:1,yScale:1}}}),createPear=(e,l,t)=>I.circle(e,l,54,{mass:3,label:x,isStatic:t,isSensor:t,collisionFilter:{category:1},render:{fillStyle:"#F5EB88",sprite:{texture:"".concat(o,"/").concat(x,".png"),xScale:1,yScale:1}}}),createPeach=(e,l,t)=>I.circle(e,l,v,{mass:3,label:b,isStatic:t,isSensor:t,collisionFilter:{category:1},render:{fillStyle:"#F6CABF",sprite:{texture:"".concat(o,"/").concat(b,".png"),xScale:1,yScale:1}}}),createPineapple=(e,l,t)=>I.circle(e,l,k,{mass:3,label:h,isStatic:t,isSensor:t,collisionFilter:{category:1},render:{fillStyle:"#F7EA4F",sprite:{texture:"".concat(o,"/").concat(h,".png"),xScale:1,yScale:1}}}),createMelon=(e,l,t)=>I.circle(e,l,C,{mass:3,label:y,isStatic:t,isSensor:t,collisionFilter:{category:1},render:{fillStyle:"#96C942",sprite:{texture:"".concat(o,"/").concat(y,".png"),xScale:1,yScale:1}}}),createWatermelon=(e,l,t)=>I.circle(e,l,F,{mass:3,label:g,isStatic:t,isSensor:t,collisionFilter:{category:1},render:{fillStyle:"#2E651F",sprite:{texture:"".concat(o,"/").concat(g,".png"),xScale:1,yScale:1}}}),$={[d]:createCherry,[S]:createStrawberry,[u]:createGrape,[m]:createOrange,[p]:createKaki},handleClick=()=>{if(n||(E(!0),setTimeout(()=>{E(!1)},300),!H||!U))return;let e=U.position.x;switch(K[0]){case d:e<129.4&&(e=129.4),e>470.6&&(e=470.6),D.add(H.world,[createCherry(e,115)]);break;case S:e<133&&(e=133),e>467&&(e=467),D.add(H.world,[createStrawberry(e,115)]);break;case u:e<140.2&&(e=140.2),e>459.8&&(e=459.8),D.add(H.world,[createGrape(e,115)]);break;case m:e<145.6&&(e=145.6),e>454.4&&(e=454.4),D.add(H.world,[createOrange(e,115)]);break;case p:e<115+w&&(e=115+w),e>485-w&&(e=485-w),D.add(H.world,[createKaki(e,115)])}W&&D.remove(H.world,W);let l=$[K[1]](e,38,!0);D.add(H.world,l),X(l);let t=G.choose(N);T([K[1],t])},handleInit=()=>{H&&(s().World.clear(null==H?void 0:H.world,!0),s().Engine.clear(H),P.off(H,"collisionActive",handleCollisionActive),P.off(H,"collisionStart",handleCollisionStart)),z&&z.canvas.remove(),L&&M.stop(L);var l=null!=H?H:B.create();q(l);let a=A.create({element:e.current,engine:l,options:{width:600,height:600,wireframes:!1,background:"#FCF6E7"}});J(a);var r=[I.rectangle(100,360,30,480,{isStatic:!0,render:{fillStyle:"#F4D88B"}}),I.rectangle(500,360,30,480,{isStatic:!0,render:{fillStyle:"#F4D88B"}}),I.rectangle(300,600,400,30,{isStatic:!0,render:{fillStyle:"#F4D88B"}}),I.rectangle(300,120,430,30,{isStatic:!0,collisionFilter:{category:0},render:{fillStyle:"#f9e8b8"}}),I.rectangle(300,90,600,5,{isSensor:!0,isStatic:!0,label:"deadline",render:{fillStyle:"transparent"}}),I.rectangle(560,360,60,400,{isStatic:!0,render:{sprite:{texture:"".concat(o,"/revolution.png"),xScale:.7,yScale:.7}}})],i=I.rectangle(300,300,2,600,{isStatic:!0,collisionFilter:{category:0},render:{fillStyle:"#aaa"}});D.add(l.world,[...r,i]),A.run(a);let n=M.create();Q(n),M.run(n,l);let w=R.create(a.canvas),v=O.create(l,{mouse:w,constraint:{stiffness:.2,render:{visible:!1}},collisionFilter:{mask:100},body:W});V(w),Z(v),D.add(l.world,v),a.mouse=w,t(a);let k=$[K[0]](300,30,!0);D.add(l.world,k),X(k);let C={};function handleCollisionStart(e){e.pairs[0]&&e.pairs.forEach(e=>{let{bodyA:t,bodyB:a}=e;if("deadline"!==t.label&&"deadline"!==a.label&&"Rectangle Body"!==t.label&&"Rectangle Body"!==a.label){if(t.label===a.label){let e=(t.position.x+a.position.x)/2,r=(t.position.y+a.position.y)/2;switch(D.remove(l.world,t),D.remove(l.world,a),t.label){case d:j(e=>e+1),D.add(l.world,[createStrawberry(e,r)]);break;case S:j(e=>e+3),D.add(l.world,[createGrape(e,r)]);break;case u:j(e=>e+6),D.add(l.world,[createOrange(e,r)]);break;case m:j(e=>e+10),D.add(l.world,[createKaki(e,r)]);break;case p:j(e=>e+15),D.add(l.world,[createApple(e,r)]);break;case f:j(e=>e+21),D.add(l.world,[createPear(e,r)]);break;case x:j(e=>e+28),D.add(l.world,[createPeach(e,r)]);break;case b:j(e=>e+36),D.add(l.world,[createPineapple(e,r)]);break;case h:j(e=>e+45),D.add(l.world,[createMelon(e,r)]);break;case y:j(e=>e+55),D.add(l.world,[createWatermelon(e,r)]);break;case g:j(e=>e+66)}}else C[t.id]=!0,C[a.id]=!0}})}function handleCollisionActive(e){e.pairs[0]&&e.pairs.forEach(e=>{let{bodyA:t,bodyB:r}=e;if("deadline"===t.label&&C[r.id]||"deadline"===r.label&&C[t.id]){console.log("Game Over!"),P.off(l,"collisionActive",handleCollisionActive),P.off(l,"collisionStart",handleCollisionStart),s().Render.stop(a),c(!0);return}})}P.on(l,"collisionStart",handleCollisionStart),P.on(l,"collisionActive",handleCollisionActive),P.on(v,"mousemove",e=>{let l=e.source.mouse.position.x;l<115&&(l=115),l>485&&(l=485),s().Body.setPosition(i,{x:l,y:300})})};return(0,i.useEffect)(()=>{handleInit()},[]),(0,i.useEffect)(()=>{let handleMouseMove=e=>{let l=e.source.mouse.position.x;l<115&&(l=115),l>485&&(l=485),W&&s().Body.setPosition(W,{x:l,y:38})};return Y&&P.on(Y,"mousemove",handleMouseMove),()=>{Y&&P.off(Y,"mousemove",handleMouseMove)}},[W,Y]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"relative w-[600px] max-w-full",children:[(0,a.jsxs)("div",{className:"absolute top-2 left-2",children:[(0,a.jsx)("h1",{className:"text-xl font-bold",children:"スイカのゲーム"}),(0,a.jsxs)("p",{className:"mt-2",children:["スコア: ",(0,a.jsx)("span",{className:"text-2xl font-bold align-middle",children:_})]})]}),(0,a.jsxs)("div",{className:"absolute top-2 right-0 w-24 h-24 rounded-full flex items-center justify-center bg-blue-200 border-4 border-blue-300",children:[(0,a.jsx)("p",{className:"absolute top-0 w-full text-center font-bold text-blue-500",children:"NEXT"}),(0,a.jsx)("img",{className:"",src:"".concat(o,"/").concat(K[1],".png"),alt:""})]})]}),r&&(0,a.jsxs)("div",{className:"py-8 bg-slate-300 w-full",children:[(0,a.jsx)("h2",{className:"text-3xl font-bold text-center",children:"Game Over!"}),(0,a.jsx)("div",{className:"text-center mt-4",children:(0,a.jsx)("button",{className:"bg-blue-500 text-white p-4",onClick:window.location.reload.bind(window.location),children:"リスタート"})})]}),(0,a.jsx)("div",{ref:e,id:"game-board",className:"h-full",onClick:handleClick,children:(0,a.jsx)("style",{children:"\n      #game-board canvas {\n        max-width: 100%;\n        max-height: 100vh;\n      }\n      "})}),(0,a.jsx)("div",{className:"md:hidden text-center mt-4",children:(0,a.jsx)("button",{className:"bg-blue-500 text-white p-4",onClick:handleClick,children:"落とす"})})]})}function Home(){return(0,a.jsx)("main",{className:"flex flex-col relative items-center ".concat(c().className),children:(0,a.jsx)(Game,{})})}},214:function(e){e.exports={style:{fontFamily:"'__Inter_75105d', '__Inter_Fallback_75105d'",fontStyle:"normal"},className:"__className_75105d"}}},function(e){e.O(0,[611,774,888,179],function(){return e(e.s=8312)}),_N_E=e.O()}]);