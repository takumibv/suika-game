(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8312:function(e,a,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return t(6325)}])},6325:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return Home}});var l=t(5893),r=t(214),c=t.n(r),n=t(7294),s=t(9842),i=t.n(s);let o="/suika-game",d="cherry",S="strawberry",u="grape",p="orange",m="kaki",f="apple",x="pear",b="peach",h="pineapple",y="melon",w="watermelon",g=21*1.8,v=37*1.8,k=42*1.8,C=52*1.8,E=62*1.8,N=[d,S,u,p,m];function Game(){let e=n.useRef(null),[a,t]=n.useState(),[r,c]=n.useState(!1),[s,_]=n.useState(!1),[j,F]=n.useState(0);var B=i().Engine,A=i().Render,M=i().Runner,P=(i().Composites,i().Events),G=i().Common,O=i().MouseConstraint,R=i().Mouse,D=i().Composite,I=i().Bodies;let[K,T]=n.useState([G.choose(N),G.choose(N)]),[W,X]=n.useState(),[H,q]=n.useState(),[z,J]=n.useState(),[L,Q]=n.useState(),[U,V]=n.useState(),[Y,Z]=n.useState(),createCherry=(e,a,t)=>I.circle(e,a,14.4,{mass:3,label:d,isStatic:t,isSensor:t,render:{fillStyle:"#CE2E21",sprite:{texture:"".concat(o,"/").concat(d,".png"),xScale:1,yScale:1}}}),createStrawberry=(e,a,t)=>I.circle(e,a,18,{mass:3,label:S,isStatic:t,isSensor:t,render:{fillStyle:"#EC7259",sprite:{texture:"".concat(o,"/").concat(S,".png"),xScale:1,yScale:1}}}),createGrape=(e,a,t)=>I.circle(e,a,25.2,{mass:3,label:u,isStatic:t,isSensor:t,render:{fillStyle:"#8C60EF",sprite:{texture:"".concat(o,"/").concat(u,".png"),xScale:1,yScale:1}}}),createOrange=(e,a,t)=>I.circle(e,a,30.6,{mass:3,label:p,isStatic:t,isSensor:t,render:{fillStyle:"#F4B940",sprite:{texture:"".concat(o,"/").concat(p,".png"),xScale:1,yScale:1}}}),createKaki=(e,a,t)=>I.circle(e,a,g,{mass:3,label:m,isStatic:t,isSensor:t,render:{fillStyle:"#EB8E39",sprite:{texture:"".concat(o,"/").concat(m,".png"),xScale:1,yScale:1}}}),createApple=(e,a,t)=>I.circle(e,a,48.6,{mass:3,label:f,isStatic:t,isSensor:t,render:{fillStyle:"#DC3224",sprite:{texture:"".concat(o,"/").concat(f,".png"),xScale:1,yScale:1}}}),createPear=(e,a,t)=>I.circle(e,a,54,{mass:3,label:x,isStatic:t,isSensor:t,render:{fillStyle:"#F5EB88",sprite:{texture:"".concat(o,"/").concat(x,".png"),xScale:1,yScale:1}}}),createPeach=(e,a,t)=>I.circle(e,a,v,{mass:3,label:b,isStatic:t,isSensor:t,render:{fillStyle:"#F6CABF",sprite:{texture:"".concat(o,"/").concat(b,".png"),xScale:1,yScale:1}}}),createPineapple=(e,a,t)=>I.circle(e,a,k,{mass:3,label:h,isStatic:t,isSensor:t,render:{fillStyle:"#F7EA4F",sprite:{texture:"".concat(o,"/").concat(h,".png"),xScale:1,yScale:1}}}),createMelon=(e,a,t)=>I.circle(e,a,C,{mass:3,label:y,isStatic:t,isSensor:t,render:{fillStyle:"#96C942",sprite:{texture:"".concat(o,"/").concat(y,".png"),xScale:1,yScale:1}}}),createWatermelon=(e,a,t)=>I.circle(e,a,E,{mass:3,label:w,isStatic:t,isSensor:t,render:{fillStyle:"#2E651F",sprite:{texture:"".concat(o,"/").concat(w,".png"),xScale:1,yScale:1}}}),$={[d]:createCherry,[S]:createStrawberry,[u]:createGrape,[p]:createOrange,[m]:createKaki},handleInit=()=>{H&&(i().World.clear(null==H?void 0:H.world,!0),i().Engine.clear(H),P.off(H,"collisionActive",handleCollisionActive),P.off(H,"collisionStart",handleCollisionStart)),z&&z.canvas.remove(),L&&M.stop(L);var a=null!=H?H:B.create();q(a);let l=A.create({element:e.current,engine:a,options:{width:600,height:600,wireframes:!1,background:"#FCF6E7"}});J(l);var r=[I.rectangle(100,360,30,480,{isStatic:!0,render:{fillStyle:"#F4D88B"}}),I.rectangle(500,360,30,480,{isStatic:!0,render:{fillStyle:"#F4D88B"}}),I.rectangle(300,600,400,30,{isStatic:!0,render:{fillStyle:"#F4D88B"}}),I.rectangle(300,120,430,30,{isStatic:!0,collisionFilter:{category:0},render:{fillStyle:"#f9e8b8"}}),I.rectangle(300,90,600,5,{isSensor:!0,isStatic:!0,label:"deadline",render:{fillStyle:"transparent"}}),I.rectangle(560,360,60,400,{isStatic:!0,render:{sprite:{texture:"".concat(o,"/revolution.png"),xScale:.7,yScale:.7}}})],n=I.rectangle(300,300,2,600,{isStatic:!0,collisionFilter:{category:0},render:{fillStyle:"#aaa"}});D.add(a.world,[...r,n]),A.run(l);let s=M.create();Q(s),M.run(s,a);let g=R.create(l.canvas),v=O.create(a,{mouse:g,constraint:{stiffness:.2,render:{visible:!1}}});V(g),Z(v),D.add(a.world,v),l.mouse=g,t(l);let k=$[K[0]](300,30,!0);D.add(a.world,k),X(k);let C={};function handleCollisionStart(e){e.pairs[0]&&e.pairs.forEach(e=>{let{bodyA:t,bodyB:l}=e;if("deadline"!==t.label&&"deadline"!==l.label&&"Rectangle Body"!==t.label&&"Rectangle Body"!==l.label){if(t.label===l.label){let e=(t.position.x+l.position.x)/2,r=(t.position.y+l.position.y)/2;switch(D.remove(a.world,t),D.remove(a.world,l),t.label){case d:F(e=>e+1),D.add(a.world,[createStrawberry(e,r)]);break;case S:F(e=>e+3),D.add(a.world,[createGrape(e,r)]);break;case u:F(e=>e+6),D.add(a.world,[createOrange(e,r)]);break;case p:F(e=>e+10),D.add(a.world,[createKaki(e,r)]);break;case m:F(e=>e+15),D.add(a.world,[createApple(e,r)]);break;case f:F(e=>e+21),D.add(a.world,[createPear(e,r)]);break;case x:F(e=>e+28),D.add(a.world,[createPeach(e,r)]);break;case b:F(e=>e+36),D.add(a.world,[createPineapple(e,r)]);break;case h:F(e=>e+45),D.add(a.world,[createMelon(e,r)]);break;case y:F(e=>e+55),D.add(a.world,[createWatermelon(e,r)]);break;case w:F(e=>e+66)}}else C[t.id]=!0,C[l.id]=!0}})}function handleCollisionActive(e){e.pairs[0]&&e.pairs.forEach(e=>{let{bodyA:t,bodyB:r}=e;if("deadline"===t.label&&C[r.id]||"deadline"===r.label&&C[t.id]){console.log("Game Over!"),P.off(a,"collisionActive",handleCollisionActive),P.off(a,"collisionStart",handleCollisionStart),i().Render.stop(l),c(!0);return}})}P.on(a,"collisionStart",handleCollisionStart),P.on(a,"collisionActive",handleCollisionActive),P.on(v,"mousemove",e=>{let a=e.source.mouse.position.x;a<115&&(a=115),a>485&&(a=485),i().Body.setPosition(n,{x:a,y:300})})};return(0,n.useEffect)(()=>{handleInit()},[]),(0,n.useEffect)(()=>{let handleMouseMove=e=>{let a=e.source.mouse.position.x;a<115&&(a=115),a>485&&(a=485),W&&i().Body.setPosition(W,{x:a,y:38})};return Y&&P.on(Y,"mousemove",handleMouseMove),()=>{Y&&P.off(Y,"mousemove",handleMouseMove)}},[W,Y]),(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:"relative w-[600px] max-w-full",children:[(0,l.jsxs)("div",{className:"absolute top-2 left-2",children:[(0,l.jsx)("h1",{className:"text-xl font-bold",children:"スイカのゲーム"}),(0,l.jsxs)("p",{className:"mt-2",children:["スコア: ",(0,l.jsx)("span",{className:"text-2xl font-bold align-middle",children:j})]})]}),(0,l.jsxs)("div",{className:"absolute top-2 right-0 w-24 h-24 rounded-full flex items-center justify-center bg-blue-200 border-4 border-blue-300",children:[(0,l.jsx)("p",{className:"absolute top-0 w-full text-center font-bold text-blue-500",children:"NEXT"}),(0,l.jsx)("img",{className:"",src:"".concat(o,"/").concat(K[1],".png"),alt:""})]})]}),r&&(0,l.jsxs)("div",{className:"py-8 bg-slate-300 w-full",children:[(0,l.jsx)("h2",{className:"text-3xl font-bold text-center",children:"Game Over!"}),(0,l.jsx)("div",{className:"text-center mt-4",children:(0,l.jsx)("button",{className:"bg-blue-500 text-white p-4",onClick:window.location.reload.bind(window.location),children:"リスタート"})})]}),(0,l.jsx)("div",{ref:e,id:"game-board",className:"h-full",onClick:()=>{if(s||(_(!0),setTimeout(()=>{_(!1)},300),!H||!U))return;let e=U.position.x;switch(K[0]){case d:e<129.4&&(e=129.4),e>470.6&&(e=470.6),D.add(H.world,[createCherry(e,115)]);break;case S:e<133&&(e=133),e>467&&(e=467),D.add(H.world,[createStrawberry(e,115)]);break;case u:e<140.2&&(e=140.2),e>459.8&&(e=459.8),D.add(H.world,[createGrape(e,115)]);break;case p:e<145.6&&(e=145.6),e>454.4&&(e=454.4),D.add(H.world,[createOrange(e,115)]);break;case m:e<115+g&&(e=115+g),e>485-g&&(e=485-g),D.add(H.world,[createKaki(e,115)])}W&&D.remove(H.world,W);let a=$[K[1]](e,38,!0);D.add(H.world,a),X(a);let t=G.choose(N);T([K[1],t])},children:(0,l.jsx)("style",{children:"\n      #game-board canvas {\n        max-width: 100%;\n        max-height: 100vh;\n      }\n      "})})]})}function Home(){return(0,l.jsx)("main",{className:"flex flex-col relative items-center ".concat(c().className),children:(0,l.jsx)(Game,{})})}},214:function(e){e.exports={style:{fontFamily:"'__Inter_75105d', '__Inter_Fallback_75105d'",fontStyle:"normal"},className:"__className_75105d"}}},function(e){e.O(0,[611,774,888,179],function(){return e(e.s=8312)}),_N_E=e.O()}]);